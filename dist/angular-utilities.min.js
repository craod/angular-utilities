!function(){"use strict";angular.module("angular-utilities",[])}(),function(){"use strict";function a(){function a(a){var c={};return c.data=angular.copy(b.data),c.isLoaded=function(){return!!c.initialized},c.load=function(){var d=a.get(b.endpoint);return c.initialized=!1,d.then(function(a){c.data=angular.extend(a.data,b.data)}),d["finally"](function(){c.initialized=!0}),d},c.settingExists=function(a){var b,d,e=a.split("."),f=angular.copy(c.data);for(b in e){if(d=e[b],!f.hasOwnProperty(d))return!1;f=f[d]}return!0},c.get=function(a,b){var d,e,f=a.split("."),g=angular.copy(c.data);for(d in f){if(e=f[d],!g.hasOwnProperty(e))return b;g=g[e]}return g},c}var b=this;b.data={},b.endpoint="",a.$inject=["$http"],b.$get=a}angular.module("angular-utilities").provider("Settings",a)}(),function(){"use strict";function a(a){var b={};return b.getExtensionByMimeType=function(a){var b=a.toLowerCase().split("/")[1];return"jpeg"==b&&(b="jpg"),b},b.getApproximateSize=function(a,b,c){var d,e,f,g,h,i,j;for(d in c)"watermarked"!=c[d]&&(g=c[d].split("-")[0].split("x"),e=g[0],f=g[1],h=Math.abs(a-e)+Math.abs(b-f),(void 0===i||i>h)&&(i=h,j=c[d]));return j},b.getPublicUrl=function(b){return a.get("storage.location")+"/"+b},b.getProfilePictureUrl=function(a,c,d){return a&&a.profilePicture?a.profilePicture.sizes&&c&&d?b.getPublicUrl("user/"+a.guid+"-"+b.getApproximateSize(c,d,a.profilePicture.sizes)+".png"):a.profilePicture.original:b.getPublicUrl("user/anonymous.png")},b.getImageUrl=function(a,c,d){if(a&&a.fileInformation){var e=b.getExtensionByMimeType(a.mimeType);return a.fileInformation.sizes&&c&&d?b.getPublicUrl("image/"+a.guid+"-"+b.getApproximateSize(c,d,a.fileInformation.sizes)+"."+e):a.fileInformation.original}throw new Error("Entity contains no image information: "+a.guid)},b}a.$inject=["Settings"],angular.module("angular-utilities").service("Resource",a)}();